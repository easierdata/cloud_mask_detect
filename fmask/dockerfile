# Inspired by https://github.com/wesfloyd/bacalhau_socat_test/blob/main/Dockerfile

# Any working directory can be chosen as per choice like '/' or '/home' etc

FROM continuumio/miniconda3
RUN conda install -c conda-forge gdal
RUN conda install -c conda-forge scipy
RUN conda install -c conda-forge scikit-image
RUN conda install -c conda-forge statsmodels
RUN conda install -c conda-forge matplotlib-base

WORKDIR /project
RUN mkdir /project/outputs
RUN mkdir /project/inputs

# Labels as key value pair
LABEL maintainer="jsolly"

# Copy the files from the host to the container
COPY fmask_4_3.py /project
COPY hello.py /project 
COPY inputs /project/inputs
# Now the directory structure is as follows
# /project
#   |-- fmask_4_3.py
#   |-- inputs
#       |-- LC08_L1TP_152028_20160209_20200907_02_T1
#           |-- LC08_L1TP_152028_20160209_20200907_02_T1_MTL.txt


# Run the python script and echo the contents of the outputs directory
CMD [ "python3", "fmask_4_3.py", "inputs/LC08_L1TP_152028_20160209_20200907_02_T1/LC08_L1TP_152028_20160209_20200907_02_T1_MTL.txt", "outputs/" ]
RUN ls -l /project/outputs